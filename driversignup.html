<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Driver Signup</title>
  <script type="module">
    // Import from CDN (Firebase v12)
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
    import { getAuth, RecaptchaVerifier, signInWithPhoneNumber } 
      from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";
    import { getDatabase, ref, set } 
      from "https://www.gstatic.com/firebasejs/12.1.0/firebase-database.js";

    // Your Firebase config (only define ONCE)
    const firebaseConfig = {
      apiKey: "AIzaSyDsn16p7w8b-x8pEA_WTO5F2oUk4MHwcUc",
      authDomain: "wavetravel-3c4c4.firebaseapp.com",
      databaseURL: "https://wavetravel-3c4c4-default-rtdb.firebaseio.com",
      projectId: "wavetravel-3c4c4",
      storageBucket: "wavetravel-3c4c4.appspot.com",   // âœ… FIXED (was wrong earlier)
      messagingSenderId: "298226098137",
      appId: "1:298226098137:web:720953b80e3e61c8bc43c8"
    };

    // Initialize
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    // Invisible reCAPTCHA setup
    window.recaptchaVerifier = new RecaptchaVerifier(auth, "send-otp-btn", {
      size: "invisible",
      callback: (response) => {
        console.log("reCAPTCHA solved:", response);
      }
    });

    // Example: send OTP
    document.getElementById("send-otp-btn").addEventListener("click", async () => {
      const phone = "+91" + document.getElementById("phone").value;
      try {
        const appVerifier = window.recaptchaVerifier;
        const confirmationResult = await signInWithPhoneNumber(auth, phone, appVerifier);
        window.confirmationResult = confirmationResult;
        alert("OTP sent!");
      } catch (err) {
        console.error("sendOtp error:", err);
        alert(err.message);
      }
    });
  </script>
</head>
<body>
  <input type="text" id="phone" placeholder="Phone number">
  <button id="send-otp-btn">Send OTP</button>
</body>
</html>
