<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WaveTravel Admin Dashboard</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(to right, #6a11cb, #2575fc);
      color: #333;
    }
    #navbar {
      background: #fff;
      padding: 10px;
      display: flex;
      justify-content: space-around;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .tab-btn {
      padding: 10px 20px;
      background: #2575fc;
      border: none;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.3s;
    }
    .tab-btn:hover {
      background: #6a11cb;
    }
    .tab-content {
      display: none;
      padding: 20px;
      margin-top: 20px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    table, th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }
    th {
      background-color: #f2f2f2;
    }
    .action-btn {
      padding: 5px 10px;
      margin: 2px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
    .approve-btn { background: #4CAF50; color: white; }
    .reject-btn { background: #f44336; color: white; }
  </style>
</head>

<body>

<div id="navbar" class="bottom-navbar">
  <button class="tab-btn" data-tab="dashboard">Dashboard</button>
  <button class="tab-btn" data-tab="users">Users</button>
  <button class="tab-btn" data-tab="drivers">Drivers</button>
  <button class="tab-btn" data-tab="pendingcars">Pending Cars</button>
  <button class="tab-btn" data-tab="slots">Slots</button>
  <button class="tab-btn" data-tab="bookings">Bookings</button>
  <button class="tab-btn" data-tab="profile">Profile</button>
</div>

<div id="dashboard" class="tab-content">Welcome to Admin Dashboard!</div>
<div id="users" class="tab-content"><h2>Users</h2><table id="usersTable"></table></div>
<div id="drivers" class="tab-content"><h2>Drivers</h2><table id="driversTable"></table></div>
<div id="pendingcars" class="tab-content"><h2>Pending Cars</h2><table id="pendingCarsTable"></table></div>
<div id="slots" class="tab-content"><h2>Slots</h2><table id="slotsTable"></table></div>
<div id="bookings" class="tab-content"><h2>Bookings</h2><table id="bookingsTable"></table></div>
<div id="profile" class="tab-content"><h2>Admin Profile</h2>Email: contactwaveride@gmail.com</div>

<!-- Toast -->
<div id="toast" style="position: fixed; bottom: 30px; right: 30px; background: #333; color: white; padding: 10px 20px; border-radius: 8px; display: none;"></div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.6.0/firebase-database.js"></script>

<script>
  // Firebase setup
  const firebaseConfig = {
    apiKey: "AIzaSyDsn16p7w8b-x8pEA_WTO5F2oUk4MHwcUc",
    authDomain: "wavetravel-3c4c4.firebaseapp.com",
    databaseURL: "https://wavetravel-3c4c4-default-rtdb.firebaseio.com",
    projectId: "wavetravel-3c4c4",
    storageBucket: "wavetravel-3c4c4.appspot.com",
    messagingSenderId: "298226098137",
    appId: "1:298226098137:web:720953b80e3e61c8bc43c8"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Navbar tab switching
  document.addEventListener('DOMContentLoaded', function() {
    const tabButtons = document.querySelectorAll('.tab-btn');
    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        const tabName = button.getAttribute('data-tab');
        openTab(tabName);
      });
    });
    openTab('dashboard'); // Default tab open
    loadAllData();
  });

  function openTab(tabName) {
    const tabs = document.querySelectorAll('.tab-content');
    tabs.forEach(tab => { tab.style.display = 'none'; });
    const selectedTab = document.getElementById(tabName);
    if (selectedTab) selectedTab.style.display = 'block';
  }

  function showToast(message) {
    const toast = document.getElementById('toast');
    toast.innerText = message;
    toast.style.display = 'block';
    setTimeout(() => { toast.style.display = 'none'; }, 2000);
  }

  function loadAllData() {
    loadUsers();
    loadDrivers();
    loadPendingCars();
    loadSlots();
    loadBookings();
  }

  function loadUsers() {
    const usersRef = db.ref('users/');
    usersRef.on('value', (snapshot) => {
      const users = snapshot.val();
      const table = document.getElementById('usersTable');
      table.innerHTML = `<tr><th>Name</th><th>Email</th><th>Phone</th></tr>`;
      if(users){
        for (let id in users) {
          const user = users[id];
          table.innerHTML += `<tr><td>${user.name || ''}</td><td>${user.email || ''}</td><td>${user.phone || ''}</td></tr>`;
        }
      }
    });
  }

  function loadDrivers() {
    const driversRef = db.ref('drivers/');
    driversRef.on('value', (snapshot) => {
      const drivers = snapshot.val();
      const table = document.getElementById('driversTable');
      table.innerHTML = `<tr><th>Name</th><th>Email</th><th>Phone</th></tr>`;
      if(drivers){
        for (let id in drivers) {
          const driver = drivers[id];
          table.innerHTML += `<tr><td>${driver.name || ''}</td><td>${driver.email || ''}</td><td>${driver.phone || ''}</td></tr>`;
        }
      }
    });
  }

  function loadPendingCars() {
    const pendingRef = db.ref('pendingcars/');
    pendingRef.on('value', (snapshot) => {
      const cars = snapshot.val();
      const table = document.getElementById('pendingCarsTable');
      table.innerHTML = `<tr><th>Model</th><th>Number</th><th>Actions</th></tr>`;
      if(cars){
        for (let id in cars) {
          const car = cars[id];
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${car.model || ''}</td>
            <td>${car.number || ''}</td>
            <td>
              <button class="action-btn approve-btn">Approve</button>
              <button class="action-btn reject-btn">Reject</button>
            </td>
          `;
          // Attach event listeners
          tr.querySelector('.approve-btn').addEventListener('click', () => approveCar(id, car));
          tr.querySelector('.reject-btn').addEventListener('click', () => rejectCar(id));
          table.appendChild(tr);
        }
      }
    });
  }

  function approveCar(id, car) {
    db.ref(`cars/${id}`).set(car);
    db.ref(`pendingcars/${id}`).remove();
    showToast('Car Approved!');
  }

  function rejectCar(id) {
    db.ref(`pendingcars/${id}`).remove();
    showToast('Car Rejected!');
  }

  function loadSlots() {
    const slotsRef = db.ref('availableslots/');
    slotsRef.on('value', (snapshot) => {
      const slots = snapshot.val();
      const table = document.getElementById('slotsTable');
      table.innerHTML = `<tr><th>Pickup</th><th>Drop</th><th>Seats</th></tr>`;
      if(slots){
        for (let id in slots) {
          const slot = slots[id];
          table.innerHTML += `<tr><td>${slot.pickup || ''}</td><td>${slot.drop || ''}</td><td>${slot.seats || ''}</td></tr>`;
        }
      }
    });
  }

  function loadBookings() {
    const bookingsRef = db.ref('bookings/');
    bookingsRef.on('value', (snapshot) => {
      const bookings = snapshot.val();
      const table = document.getElementById('bookingsTable');
      table.innerHTML = `<tr><th>Pickup</th><th>Drop</th><th>Date</th></tr>`;
      if(bookings){
        for (let id in bookings) {
          const booking = bookings[id];
          table.innerHTML += `<tr><td>${booking.pickup || ''}</td><td>${booking.drop || ''}</td><td>${booking.date || ''}</td></tr>`;
        }
      }
    });
  }
</script>

</body>
</html>

